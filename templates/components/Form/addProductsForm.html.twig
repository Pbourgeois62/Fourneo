<div {{ attributes }} class="max-w-4xl mx-auto mt-8">
	<div class="bg-white shadow-lg rounded-xl p-8 space-y-6">
		<h1 class="text-2xl font-semibold text-gray-800">Créer un événement de vente</h1>

		{{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}

		<div>
			{{ form_label(form.name, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
			{{ form_widget(form.name, {'attr': {'class': 'mt-1 block w-full rounded-md border-gray-300 shadow-sm'}}) }}
			{{ form_errors(form.name) }}
		</div>

		<div>
			{{ form_label(form.description, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
			{{ form_widget(form.description, {'attr': {'class': 'mt-1 block w-full rounded-md border-gray-300 shadow-sm'}}) }}
			{{ form_errors(form.description) }}
		</div>

		<div>
			{{ form_label(form.address, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
			{{ form_widget(form.address, {'attr': {'class': 'mt-1 block w-full rounded-md border-gray-300 shadow-sm'}}) }}
			{{ form_errors(form.address) }}
		</div>

		<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
			<div>
				{{ form_label(form.startDate, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
				{{ form_widget(form.startDate, {'attr': {'class': 'mt-1 block w-full rounded-md border-gray-300 shadow-sm'}}) }}
				{{ form_errors(form.startDate) }}
			</div>
			<div>
				{{ form_label(form.endDate, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700'}}) }}
				{{ form_widget(form.endDate, {'attr': {'class': 'mt-1 block w-full rounded-md border-gray-300 shadow-sm'}}) }}
				{{ form_errors(form.endDate) }}
			</div>
		</div>

		<div class="flex flex-column gap-4">
			<h2 class="text-lg font-medium text-gray-700 mb-2">Ajouter des produits à la vente</h2>
			{{ form_widget(form.productEvents.vars.button_add, { label: '+ Ajouter un produit', attr: { class: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition' } }) }}
		</div>

		<div class="flex flex-wrap gap-4">
			{% for productForm in form.productEvents %}
				<div
					class="relative border rounded-xl p-4 bg-gray-50 w-full sm:w-[calc(50%-0.5rem)]">

					{# Bouton supprimer en haut à droite #}
					{% if productForm.vars.button_delete is defined %}
						<div class="absolute top-2 right-2 z-10">
							{{ form_widget(productForm.vars.button_delete, {
                        label: '',
                        attr: {
                            class: 'btn btn-sm btn-danger d-flex align-items-center justify-content-center p-1',
                            title: 'Supprimer'
                        }
                    }) }}
							<i class="bi bi-trash"></i>
						</div>
					{% endif %}

					<div class="flex items-start gap-4">
						<div class="flex-1">
							{{ form_row(productForm.product, {
                        label: 'Produit',
                        attr: { class: 'w-full' }
                    }) }}
						</div>
						<div class="w-24">
							{{ form_row(productForm.quantity, {
                        label: 'Qté',
                        attr: { class: 'w-full text-center' }
                    }) }}
						</div>
					</div>
				</div>
			{% endfor %}
		</div>


		<div class="pt-4 flex justify-end gap-4">
			<a href="{{ path('sale_event_index') }}" class="text-gray-600 hover:text-gray-900 underline">
				Annuler
			</a>
			<button type="submit" data-action="live#action:prevent" data-live-action-param="save" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
				Enregistrer
			</button>
		</div>

		{{ form_end(form) }}
	</div>
</div>
